//nolint
syntax = "proto3";

package proto;
option go_package = "main/proto";

// Java Configuration
option java_multiple_files = true;
option java_outer_classname = "EV3Client";

// For enums
// https://protobuf.dev/programming-guides/proto2/#customoptions
//
import "google/protobuf/descriptor.proto";


// Functions that can be called through the interface
service Motors {
  rpc RunMotors(MultipleMotors) returns (StatusReply) {} // Takes an array. Usable for all amounts of motors at a time
  rpc StopMotors(MultipleMotors) returns (StatusReply) {}
  rpc Rotate(RotateRequest) returns (StatusReply) {}
}

extend google.protobuf.EnumValueOptions {
  optional string my_enum_value_option = 50005; // specific value??
}
// Motortypes
enum Type {
  large = 0 [(my_enum_value_option) = "lego-ev3-l-motor"];
  medium = 1 [(my_enum_value_option) = "lego-ev3-m-motor"];
  small = 2 [(my_enum_value_option) = "lego-ev3-s-motor"]; // For possible future needs - not used
}

message Motortype {
  Type enum = 1;
}

// Ports on EV3
enum Port {
  A = 0;
  B = 1;
  C = 2;
  D = 3;
}

message RotateRequest {
  MultipleMotors multipleMotors = 1; // Or: repeated MotorRequest motor = 1;
  int32 degrees = 2; // For specifying for how long a motor should run
}

// MultipleMotors reuses the message MotorRequest
// The 'repeated' keyword makes it an array of motors, which can be handled with standard array syntax
// Note that '1' is a tag, as the default value of repeated fields is empty
message MultipleMotors {
  repeated MotorRequest motor = 1;
}

message MotorRequest {
  int32 motorSpeed = 1;
  Type motorType = 2; // E.g. "medium"
  Port motorPort = 3; // E.g. "A"
}

message StatusReply {
  bool replyMessage = 1; // Success
}